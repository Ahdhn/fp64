# **FP64** [![Windows](https://github.com/Ahdhn/fp64/actions/workflows/Windows.yml/badge.svg)](https://github.com/Ahdhn/fp64/actions/workflows/Windows.yml) [![Ubuntu](https://github.com/Ahdhn/fp64/actions/workflows/Ubuntu.yml/badge.svg)](https://github.com/Ahdhn/fp64/actions/workflows/Ubuntu.yml)

The goal is of this code is to explore the cost of double-precision floating point division on a memory bound computation. The code simply launches a kernel where everything reads a single element for a buffer, adds a constant to it, and then writes it to the buffer. We do this first using different stride (1 up to 32) and then using different offsets (0 up to 32). 

## Build 
```
git clone https://github.com/Ahdhn/fp64.git
cd fp64
mkdir build
cd build 
cmake ..
```
Depending on the system, this will generate either a `.sln` project on Windows or a `make` file for a Linux system. 

# Results 
On a GTX 1050 GPU (Pascal architecture - Compute Capability 6.1)
```
Device: NVIDIA GeForce GTX 1050
Transfer size (MB): 32
Double Precision
============================== Stride Test ==============================
Stride  BW (GB/s)      Time (ms)      BW w/div (GB/s)     Time w/div (ms)
1       88.2768        0.724992       48.6039             1.31677
2       44.2253        1.44714        44.2136             1.44752
3       29.7194        2.15347        29.6934             2.15536
4       22.2183        2.88051        22.2816             2.87232
5       22.4419        2.85181        22.4992             2.84454
6       22.2975        2.87027        22.4659             2.84877
7       21.3675        2.9952         21.9838             2.91123
8       20.771         3.08122        21.5169             2.9744
9       19.7285        3.24403        20.1904             3.16982
10      19.16          3.34029        19.3564             3.3064
11      18.4529        3.46829        18.5798             3.44461
12      18.3338        3.49082        18.3878             3.48058
13      17.4484        3.66797        17.3659             3.68538
14      16.9193        3.78266        16.8192             3.80518
15      16.3399        3.9168         16.2803             3.93114
16      17.463         3.6649         17.5179             3.65341
17      15.2179        4.20557        15.201              4.21024
18      14.828         4.31616        14.8644             4.3056
19      14.532         4.40406        14.5255             4.40605
20      14.6267        4.37555        14.5654             4.39398
21      14.2825        4.48102        14.2415             4.49392
22      13.9384        4.59162        13.855              4.61926
23      13.4495        4.75853        13.4006             4.7759
24      13.6255        4.69709        13.4902             4.74419
25      13.1592        4.86352        13.1055             4.88346
26      13.1027        4.88448        13.0188             4.91597
27      12.8946        4.96333        12.787              5.00509
28      12.5351        5.10566        12.4663             5.13386
29      12.3141        5.19731        12.1975             5.24698
30      12.5653        5.09338        12.4959             5.1217
31      12.3518        5.18144        12.224              5.23558
32      15.501         4.12877        15.3092             4.18048

============================== Offset Test ==============================
Stride  BW (GB/s)      Time (ms)      BW w/div (GB/s)     Time w/div (ms)
0       87.1878        0.734048       60.4047             1.05952
1       87.7809        0.729088       60.4449             1.05882
2       87.5925        0.730656       60.3865             1.05984
3       88.0359        0.726976       60.412              1.05939
4       88.9047        0.719872       60.4577             1.05859
5       88.0282        0.72704        59.7229             1.07162
6       88.0282        0.72704        60.3846             1.05987
7       88.4017        0.723968       60.3901             1.05978
8       89.67          0.713728       60.4449             1.05882
9       88.2768        0.724992       60.4065             1.05949
10      88.1523        0.726016       60.3919             1.05974
11      88.0475        0.72688        60.3919             1.05974
12      89.1583        0.717824       60.3865             1.05984
13      88.0282        0.72704        60.4449             1.05882
14      87.8117        0.728832       60.4084             1.05946
15      87.7809        0.729088       60.4449             1.05882
16      87.7809        0.729088       60.3865             1.05984
17      87.535         0.731136       60.3956             1.05968
18      86.2069        0.7424         60.4065             1.05949
19      87.6578        0.730112       60.3865             1.05984
20      88.9047        0.719872       60.4449             1.05882
21      88.2768        0.724992       60.3865             1.05984
22      88.1523        0.726016       60.27               1.06189
23      88.4017        0.723968       60.3865             1.05984
24      89.5776        0.714464       60.4449             1.05882
25      88.1523        0.726016       61.5953             1.03904
26      87.6578        0.730112       61.5347             1.04006
27      88.2768        0.724992       61.5801             1.0393
28      89.4134        0.715776       61.6048             1.03888
29      88.1523        0.726016       61.4628             1.04128
30      87.9044        0.728064       61.5764             1.03936
31      88.0282        0.72704        61.5858             1.0392
32      88.1523        0.726016       61.5479             1.03984
```

On a RTX A6000 GPU (Ampere architecture - Compute Capability 8.6)
```
Device: NVIDIA RTX A6000
Transfer size (MB): 32
Double Precision
============================== Stride Test ==============================
Stride  BW (GB/s)      Time (ms)      BW w/div (GB/s)     Time w/div (ms)
1       612.557        0.10448        485.791             0.131744
2       319.03         0.200608       299.94              0.213376
3       214.984        0.297696       213.561             0.29968
4       159.757        0.400608       160.514             0.39872
5       158.894        0.402784       86.5089             0.739808
6       89.3615        0.716192       82.4878             0.775872
7       147.754        0.433152       148.049             0.432288
8       144.477        0.442976       145.106             0.441056
9       83.2466        0.7688         138.389             0.462464
10      133.316        0.480064       133.182             0.480544
11      128.32         0.498752       129.811             0.493024
12      128.708        0.497248       128.617             0.4976
13      57.1298        1.12026        122.055             0.524352
14      60.107         1.06477        117.737             0.543584
15      111.57         0.573632       114.129             0.560768
16      106.53         0.600768       53.5418             1.19533
17      102.554        0.624064       102.791             0.622624
18      99.1572        0.64544        99.5124             0.643136
19      95.9693        0.66688        96.0846             0.66608
20      50.0138        1.27965        67.8956             0.942624
21      42.7789        1.49606        93.5716             0.683968
22      87.974         0.727488       90.8595             0.704384
23      86.4827        0.740032       51.13               1.25171
24      86.5988        0.73904        85.6311             0.747392
25      83.6855        0.764768       82.2064             0.778528
26      82.3147        0.777504       36.5037             1.75325
27      35.7232        1.79155        80.0544             0.799456
28      80.1314        0.798688       45.0278             1.42134
29      52.8109        1.21187        44.34               1.44339
30      75.3438        0.84944        75.27               0.850272
31      42.6321        1.50122        75.8524             0.843744
32      82.352         0.777152       37.7017             1.69754

============================== Offset Test ==============================
Stride  BW (GB/s)      Time (ms)      BW w/div (GB/s)     Time w/div (ms)
0       614.251        0.104192       486.381             0.131584
1       630.12         0.101568       486.855             0.131456
2       620.732        0.103104       486.973             0.131424
3       626.37         0.102176       487.329             0.131328
4       629.327        0.101696       486.263             0.131616
5       623.053        0.10272        486.736             0.131488
6       622.471        0.102816       484.614             0.132064
7       619.963        0.103232       486.027             0.13168
8       625            0.1024         486.855             0.131456
9       626.566        0.102144       484.144             0.132192
10      621.697        0.102944       485.201             0.131904
11      626.174        0.102208       487.092             0.131392
12      623.441        0.102656       486.381             0.131584
13      619.771        0.103264       485.201             0.131904
14      625.978        0.10224        487.567             0.131264
15      620.54         0.103136       484.262             0.13216
16      621.891        0.102912       484.848             0.132
17      623.441        0.102656       486.618             0.13152
18      625.978        0.10224        485.909             0.131712
19      627.156        0.102048       485.437             0.13184
20      625.195        0.102368       487.211             0.13136
21      626.174        0.102208       484.262             0.13216
22      626.959        0.10208        487.092             0.131392
23      625.782        0.102272       484.144             0.132192
24      623.636        0.102624       486.618             0.13152
25      622.665        0.102784       486.855             0.131456
26      625            0.1024         486.736             0.131488
27      626.174        0.102208       486.855             0.131456
28      545.703        0.11728        486.5               0.131552
29      625.195        0.102368       486.5               0.131552
30      618.238        0.10352        486.618             0.13152
31      622.084        0.10288        486.5               0.131552
32      620.925        0.103072       485.791             0.131744
```