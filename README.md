# **FP64** [![Windows](https://github.com/Ahdhn/fp64/actions/workflows/Windows.yml/badge.svg)](https://github.com/Ahdhn/fp64/actions/workflows/Windows.yml) [![Ubuntu](https://github.com/Ahdhn/fp64/actions/workflows/Ubuntu.yml/badge.svg)](https://github.com/Ahdhn/fp64/actions/workflows/Ubuntu.yml)

The goal is of this code is to explore the cost of double-precision floating point division on a memory bound computation. The code simply launches a kernel where everything reads a single element for a buffer, adds a constant to it, and then writes it to the buffer. We do this first using different stride (1 up to 32) and then using different offsets (0 up to 32). 

## Build 
```
git clone https://github.com/Ahdhn/fp64.git
cd fp64
mkdir build
cd build 
cmake ..
```
Depending on the system, this will generate either a `.sln` project on Windows or a `make` file for a Linux system. 

# Results 
## On a GTX 1050 GPU (Pascal architecture - Compute Capability 6.1)
```
Device: NVIDIA GeForce GTX 1050
Transfer size (MB): 32
Double Precision
============================== Stride Test ==============================
Stride  BW (GB/s)      Time (ms)      BW w/div (GB/s)     Time w/div (ms)
1       88.2768        0.724992       48.6039             1.31677
2       44.2253        1.44714        44.2136             1.44752
3       29.7194        2.15347        29.6934             2.15536
4       22.2183        2.88051        22.2816             2.87232
5       22.4419        2.85181        22.4992             2.84454
6       22.2975        2.87027        22.4659             2.84877
7       21.3675        2.9952         21.9838             2.91123
8       20.771         3.08122        21.5169             2.9744
9       19.7285        3.24403        20.1904             3.16982
10      19.16          3.34029        19.3564             3.3064
11      18.4529        3.46829        18.5798             3.44461
12      18.3338        3.49082        18.3878             3.48058
13      17.4484        3.66797        17.3659             3.68538
14      16.9193        3.78266        16.8192             3.80518
15      16.3399        3.9168         16.2803             3.93114
16      17.463         3.6649         17.5179             3.65341
17      15.2179        4.20557        15.201              4.21024
18      14.828         4.31616        14.8644             4.3056
19      14.532         4.40406        14.5255             4.40605
20      14.6267        4.37555        14.5654             4.39398
21      14.2825        4.48102        14.2415             4.49392
22      13.9384        4.59162        13.855              4.61926
23      13.4495        4.75853        13.4006             4.7759
24      13.6255        4.69709        13.4902             4.74419
25      13.1592        4.86352        13.1055             4.88346
26      13.1027        4.88448        13.0188             4.91597
27      12.8946        4.96333        12.787              5.00509
28      12.5351        5.10566        12.4663             5.13386
29      12.3141        5.19731        12.1975             5.24698
30      12.5653        5.09338        12.4959             5.1217
31      12.3518        5.18144        12.224              5.23558
32      15.501         4.12877        15.3092             4.18048

============================== Offset Test ==============================
Stride  BW (GB/s)      Time (ms)      BW w/div (GB/s)     Time w/div (ms)
0       87.1878        0.734048       60.4047             1.05952
1       87.7809        0.729088       60.4449             1.05882
2       87.5925        0.730656       60.3865             1.05984
3       88.0359        0.726976       60.412              1.05939
4       88.9047        0.719872       60.4577             1.05859
5       88.0282        0.72704        59.7229             1.07162
6       88.0282        0.72704        60.3846             1.05987
7       88.4017        0.723968       60.3901             1.05978
8       89.67          0.713728       60.4449             1.05882
9       88.2768        0.724992       60.4065             1.05949
10      88.1523        0.726016       60.3919             1.05974
11      88.0475        0.72688        60.3919             1.05974
12      89.1583        0.717824       60.3865             1.05984
13      88.0282        0.72704        60.4449             1.05882
14      87.8117        0.728832       60.4084             1.05946
15      87.7809        0.729088       60.4449             1.05882
16      87.7809        0.729088       60.3865             1.05984
17      87.535         0.731136       60.3956             1.05968
18      86.2069        0.7424         60.4065             1.05949
19      87.6578        0.730112       60.3865             1.05984
20      88.9047        0.719872       60.4449             1.05882
21      88.2768        0.724992       60.3865             1.05984
22      88.1523        0.726016       60.27               1.06189
23      88.4017        0.723968       60.3865             1.05984
24      89.5776        0.714464       60.4449             1.05882
25      88.1523        0.726016       61.5953             1.03904
26      87.6578        0.730112       61.5347             1.04006
27      88.2768        0.724992       61.5801             1.0393
28      89.4134        0.715776       61.6048             1.03888
29      88.1523        0.726016       61.4628             1.04128
30      87.9044        0.728064       61.5764             1.03936
31      88.0282        0.72704        61.5858             1.0392
32      88.1523        0.726016       61.5479             1.03984
```

## On a GV100 GPU (Volta architecture - Compute Capability 7.0)
```
Device: NVIDIA Quadro GV100
Transfer size (MB): 32
Double Precision
============================== Stride Test ==============================
Stride  BW (GB/s)      Time (ms)      BW w/div (GB/s)     Time w/div (ms)
1       527.287        0.121376       519.076             0.123296       
2       276.052        0.23184        274.914             0.2328         
3       186.498        0.343168       185.048             0.345856       
4       139.237        0.459648       138.658             0.461568       
5       117.945        0.542624       117.53              0.544544       
6       105.247        0.608096       105.053             0.609216       
7       93.0795        0.687584       92.3105             0.693312       
8       89.2578        0.717024       88.0863             0.72656        
9       83.3472        0.767872       81.8565             0.781856       
10      76.4965        0.83664        74.3025             0.861344       
11      77.824         0.822368       77.6699             0.824          
12      77.0921        0.830176       76.8728             0.832544       
13      76.1238        0.840736       76.9408             0.831808       
14      73.1663        0.87472        73.9508             0.86544        
15      71.6384        0.893376       72.2961             0.885248       
16      75.1795        0.851296       73.9372             0.8656         
17      65.4772        0.97744        68.7592             0.930784       
18      62.004         1.03219        63.5829             1.00656        
19      57.6934        1.10931        62.9644             1.01645        
20      60.6042        1.05603        58.1024             1.1015         
21      56.7263        1.12822        59.961              1.06736        
22      53.762         1.19043        57.3773             1.11542        
23      54.5078        1.17414        52.9857             1.20787        
24      50.0413        1.27894        54.8321             1.1672         
25      48.6251        1.31619        51.3452             1.24646        
26      48.9704        1.30691        51.8215             1.23501        
27      48.3699        1.32314        49.7921             1.28534        
28      46.6853        1.37088        46.6952             1.37059        
29      44.4889        1.43856        45.0015             1.42218        
30      43.0756        1.48576        45.2202             1.4153         
31      45.5788        1.40416        50.1895             1.27517        
32      56.0036        1.14278        57.5109             1.11283        

============================== Offset Test ==============================
Stride  BW (GB/s)      Time (ms)      BW w/div (GB/s)     Time w/div (ms)
0       503.018        0.127232       487.805             0.1312         
1       531.208        0.12048        523.149             0.122336       
2       530.363        0.120672       526.316             0.1216         
3       531.632        0.120384       498.629             0.128352       
4       534.045        0.11984        528.541             0.121088       
5       530.504        0.12064        528.402             0.12112        
6       531.208        0.12048        523.423             0.122272       
7       531.208        0.12048        526.732             0.121504       
8       534.474        0.119744       523.834             0.122176       
9       531.491        0.120416       525.348             0.121824       
10      530.504        0.12064        535.332             0.119552       
11      528.402        0.12112        521.241             0.122784       
12      529.801        0.1208         524.521             0.122016       
13      513.479        0.12464        522.057             0.122592       
14      516.662        0.123872       526.593             0.121536       
15      529.661        0.120832       524.659             0.121984       
16      531.915        0.12032        521.512             0.12272        
17      530.786        0.120576       530.363             0.120672       
18      529.241        0.120928       534.188             0.119808       
19      523.423        0.122272       522.603             0.122464       
20      534.188        0.119808       509.295             0.125664       
21      530.363        0.120672       527.704             0.12128        
22      531.915        0.12032        523.013             0.122368       
23      531.35         0.120448       524.384             0.122048       
24      533.049        0.120064       530.363             0.120672       
25      531.632        0.120384       510.725             0.125312       
26      515.73         0.124096       525.486             0.121792       
27      527.704        0.12128        528.262             0.121152       
28      531.35         0.120448       522.876             0.1224         
29      528.821        0.121024       528.262             0.121152       
30      531.067        0.120512       526.177             0.121632       
31      529.942        0.120768       523.286             0.122304       
32      530.926        0.120544       524.521             0.122016  
```

## On a RTX A6000 GPU (Ampere architecture - Compute Capability 8.6)
```
Device: NVIDIA RTX A6000
Transfer size (MB): 32
Double Precision
============================== Stride Test ==============================
Stride  BW (GB/s)      Time (ms)      BW w/div (GB/s)     Time w/div (ms)
1       612.557        0.10448        485.791             0.131744
2       319.03         0.200608       299.94              0.213376
3       214.984        0.297696       213.561             0.29968
4       159.757        0.400608       160.514             0.39872
5       158.894        0.402784       86.5089             0.739808
6       89.3615        0.716192       82.4878             0.775872
7       147.754        0.433152       148.049             0.432288
8       144.477        0.442976       145.106             0.441056
9       83.2466        0.7688         138.389             0.462464
10      133.316        0.480064       133.182             0.480544
11      128.32         0.498752       129.811             0.493024
12      128.708        0.497248       128.617             0.4976
13      57.1298        1.12026        122.055             0.524352
14      60.107         1.06477        117.737             0.543584
15      111.57         0.573632       114.129             0.560768
16      106.53         0.600768       53.5418             1.19533
17      102.554        0.624064       102.791             0.622624
18      99.1572        0.64544        99.5124             0.643136
19      95.9693        0.66688        96.0846             0.66608
20      50.0138        1.27965        67.8956             0.942624
21      42.7789        1.49606        93.5716             0.683968
22      87.974         0.727488       90.8595             0.704384
23      86.4827        0.740032       51.13               1.25171
24      86.5988        0.73904        85.6311             0.747392
25      83.6855        0.764768       82.2064             0.778528
26      82.3147        0.777504       36.5037             1.75325
27      35.7232        1.79155        80.0544             0.799456
28      80.1314        0.798688       45.0278             1.42134
29      52.8109        1.21187        44.34               1.44339
30      75.3438        0.84944        75.27               0.850272
31      42.6321        1.50122        75.8524             0.843744
32      82.352         0.777152       37.7017             1.69754

============================== Offset Test ==============================
Stride  BW (GB/s)      Time (ms)      BW w/div (GB/s)     Time w/div (ms)
0       614.251        0.104192       486.381             0.131584
1       630.12         0.101568       486.855             0.131456
2       620.732        0.103104       486.973             0.131424
3       626.37         0.102176       487.329             0.131328
4       629.327        0.101696       486.263             0.131616
5       623.053        0.10272        486.736             0.131488
6       622.471        0.102816       484.614             0.132064
7       619.963        0.103232       486.027             0.13168
8       625            0.1024         486.855             0.131456
9       626.566        0.102144       484.144             0.132192
10      621.697        0.102944       485.201             0.131904
11      626.174        0.102208       487.092             0.131392
12      623.441        0.102656       486.381             0.131584
13      619.771        0.103264       485.201             0.131904
14      625.978        0.10224        487.567             0.131264
15      620.54         0.103136       484.262             0.13216
16      621.891        0.102912       484.848             0.132
17      623.441        0.102656       486.618             0.13152
18      625.978        0.10224        485.909             0.131712
19      627.156        0.102048       485.437             0.13184
20      625.195        0.102368       487.211             0.13136
21      626.174        0.102208       484.262             0.13216
22      626.959        0.10208        487.092             0.131392
23      625.782        0.102272       484.144             0.132192
24      623.636        0.102624       486.618             0.13152
25      622.665        0.102784       486.855             0.131456
26      625            0.1024         486.736             0.131488
27      626.174        0.102208       486.855             0.131456
28      545.703        0.11728        486.5               0.131552
29      625.195        0.102368       486.5               0.131552
30      618.238        0.10352        486.618             0.13152
31      622.084        0.10288        486.5               0.131552
32      620.925        0.103072       485.791             0.131744
```